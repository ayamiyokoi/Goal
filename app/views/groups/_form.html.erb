<%= form_with(model: group, local: true) do |form| %>
  <% if group.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(group.errors.count, "error") %> prohibited this group from being saved:</h2>
      <ul>
        <% group.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= form.label 'グループ名' %>
    <%= form.text_field :name, class: "form-control", placeholder: "例）営業1グループ1課" %>
  </div>

  <div class="field">
    <%= form.label 'グループ画像' %><br>
    <%= form.attachment_field :group_image %>
  </div>

  <div>
    <%= form.label :user_ids, "メンバー", class: "control-label" %>
    <p>
    <ul style="list-style:none;display:flex;">


          <%= form.collection_check_boxes :user_ids, @users, :id, :name do |b| %>
           <li style="margin-right: 16px;">
            <%= b.text %>
            <%= b.check_box  %>
            <%= attachment_image_tag(User.find_by_name(b.text), :profile_image, size: '40x40', format: 'jpeg', fallback: "no_image.jpg", class: "img") %>
          <% end %>

    </ul>

      <%#= form.check_box :user_ids,{ multiple: true, checked: user[:checked], disabled: user[:disabled], include_hidden: false, class: "check-box" }, user[:id] %>

    </p>
  </div>

  <div class="actions">
    <%= form.submit %>
  </div>
<% end %>
